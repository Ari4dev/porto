---
export interface Props {
  title?: string;
  description?: string;
}

const {
  title = "Wahyu Ari | Frontend Developer",
  description = "Experienced frontend developer specializing in modern web applications with React, JavaScript, and responsive design. View my portfolio of projects.",
} = Astro.props;
---

<!doctype html>
<html lang="en" data-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <meta name="author" content="Wahyu Ari" />
    <meta
      name="keywords"
      content="Frontend Developer, Web Developer, React, JavaScript, HTML, CSS, Portfolio"
    />
    <meta name="robots" content="index, follow" />

    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content="/images/og-image.jpg" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />

    <!-- Theme Color -->
    <meta name="theme-color" content="#6366f1" />

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />

    <!-- Fonts - Plus Jakarta Sans, Inter, JetBrains Mono -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&family=Plus+Jakarta+Sans:wght@600;700;800&display=swap"
      rel="stylesheet"
    />

    <title>{title}</title>

    <!-- Inline Critical Theme Script (prevents FOUC) -->
    <script is:inline>
      (function () {
        const savedTheme = localStorage.getItem("theme");
        const systemPreference = window.matchMedia(
          "(prefers-color-scheme: dark)",
        ).matches
          ? "dark"
          : "light";
        const theme = savedTheme || systemPreference;
        document.documentElement.setAttribute("data-theme", theme);
      })();
    </script>
  </head>
  <body>
    <!-- Custom Cursor -->
    <div class="cursor-dot" id="cursorDot"></div>
    <div class="cursor-ring" id="cursorRing"></div>

    <!-- Skip Link for Accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <slot />

    <!-- Scroll Reveal & Custom Cursor Script -->
    <script>
      // Custom Cursor
      const dot = document.getElementById("cursorDot");
      const ring = document.getElementById("cursorRing");

      let mouseX = 0,
        mouseY = 0;
      let ringX = 0,
        ringY = 0;

      document.addEventListener("mousemove", (e) => {
        mouseX = e.clientX;
        mouseY = e.clientY;
        if (dot) {
          dot.style.left = mouseX + "px";
          dot.style.top = mouseY + "px";
        }
      });

      function animateRing() {
        ringX += (mouseX - ringX) * 0.15;
        ringY += (mouseY - ringY) * 0.15;
        if (ring) {
          ring.style.left = ringX + "px";
          ring.style.top = ringY + "px";
        }
        requestAnimationFrame(animateRing);
      }
      animateRing();

      // Cursor hover effects
      const hoverElements = document.querySelectorAll("a, button, .card-lift");
      hoverElements.forEach((el) => {
        el.addEventListener("mouseenter", () => {
          dot?.classList.add("cursor-hover");
          ring?.classList.add("cursor-hover");
        });
        el.addEventListener("mouseleave", () => {
          dot?.classList.remove("cursor-hover");
          ring?.classList.remove("cursor-hover");
        });
      });

      // Scroll Reveal
      const revealElements = document.querySelectorAll(
        ".section, .card-lift, .service-card, .skill-card, .experience-highlight",
      );

      const revealObserver = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry, index) => {
            if (entry.isIntersecting) {
              setTimeout(() => {
                entry.target.classList.add("revealed");
              }, index * 100);
              revealObserver.unobserve(entry.target);
            }
          });
        },
        { threshold: 0.1, rootMargin: "0px 0px -50px 0px" },
      );

      revealElements.forEach((el) => {
        el.classList.add("reveal-on-scroll");
        revealObserver.observe(el);
      });

      // Hide cursor on touch devices
      if ("ontouchstart" in window) {
        dot?.remove();
        ring?.remove();
      }
    </script>
  </body>
</html>

<style is:global>
  @import "../styles/global.css";
  @import "../styles/animations.css";
  @import "../styles/responsive.css";
</style>
