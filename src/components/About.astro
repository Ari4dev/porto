---
const services = [
  {
    icon: `<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg>`,
    title: "Web Development",
    description:
      "Building modern, responsive websites with clean code and excellent performance.",
  },
  {
    icon: `<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="5" y="2" width="14" height="20" rx="2" ry="2"></rect><line x1="12" y1="18" x2="12.01" y2="18"></line></svg>`,
    title: "App Development",
    description:
      "Creating cross-platform applications with intuitive user experiences.",
  },
  {
    icon: `<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 19l7-7 3 3-7 7-3-3z"></path><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path><path d="M2 2l7.586 7.586"></path><circle cx="11" cy="11" r="2"></circle></svg>`,
    title: "UI/UX Design",
    description:
      "Designing beautiful interfaces with focus on user experience and accessibility.",
  },
];
---

<section id="about" class="about section">
  <div class="container">
    <div class="about-grid">
      <!-- Left: Content -->
      <div class="about-content">
        <div class="section-badge">
          <span class="badge badge-accent">About Me</span>
        </div>

        <h2 class="about-title">
          Crafting Digital Experiences with <span class="gradient-text"
            >Passion & Precision</span
          >
        </h2>

        <div class="about-text">
          <p>
            I started my software journey from photography. Through that, I
            learned to love the process of creating from scratch. Since then,
            this has led me to software development where I can combine
            creativity with technical skills.
          </p>
          <p>
            My focus is on building user-centric interfaces that are not only
            visually appealing but also performant and accessible. I believe in
            clean code, continuous learning, and delivering quality work that
            makes an impact.
          </p>
        </div>

        <!-- Services -->
        <div class="services-grid">
          {
            services.map((service, index) => (
              <div
                class="service-card card-lift"
                style={`--delay: ${index * 0.1}s`}
              >
                <div class="service-icon" set:html={service.icon} />
                <h3 class="service-title">{service.title}</h3>
                <p class="service-description">{service.description}</p>
              </div>
            ))
          }
        </div>
      </div>

      <!-- Right: Experience -->
      <div class="about-stats">
        <!-- Experience Timeline Mini -->
        <div class="experience-highlight">
          <div class="exp-header">
            <span class="exp-badge">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                style="vertical-align: middle; margin-right: 4px;"
              >
                <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
                <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
              </svg>
              Current
            </span>
          </div>
          <h4 class="exp-title">Freelance Frontend Developer</h4>
          <p class="exp-period">2023 - Present</p>
          <p class="exp-description">
            Building responsive web applications for Codewave Labs. Specializing
            in React, Next.js, and modern CSS solutions.
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .about {
    background: var(--color-bg-secondary);
    position: relative;
  }

  .about-grid {
    display: grid;
    grid-template-columns: 1.2fr 0.8fr;
    gap: var(--space-16);
    align-items: start;
  }

  /* Content Side */
  .about-content {
    max-width: 700px;
  }

  .section-badge {
    margin-bottom: var(--space-4);
  }

  .about-title {
    font-size: var(--text-3xl);
    font-weight: 700;
    line-height: 1.3;
    margin-bottom: var(--space-6);
  }

  .about-text {
    margin-bottom: var(--space-8);
  }

  .about-text p {
    font-size: var(--text-base);
    color: var(--color-text-secondary);
    line-height: 1.8;
    margin-bottom: var(--space-4);
  }

  .about-text p:last-child {
    margin-bottom: 0;
  }

  /* Services */
  .services-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-4);
  }

  .service-card {
    padding: var(--space-5);
    background: var(--color-bg-card);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-xl);
    text-align: center;
    opacity: 0;
    animation: fadeInUp 0.5s ease forwards;
    animation-delay: var(--delay);
  }

  .service-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 56px;
    height: 56px;
    background: rgba(99, 102, 241, 0.1);
    border-radius: var(--radius-lg);
    color: var(--color-accent);
    margin-bottom: var(--space-4);
  }

  .service-title {
    font-size: var(--text-sm);
    font-weight: 600;
    color: var(--color-text-primary);
    margin-bottom: var(--space-2);
  }

  .service-description {
    font-size: var(--text-xs);
    color: var(--color-text-muted);
    line-height: 1.6;
  }

  /* Stats Side */
  .about-stats {
    position: sticky;
    top: 120px;
  }

  /* Experience Highlight */
  .experience-highlight {
    background: var(--color-bg-card);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-xl);
    padding: var(--space-6);
    position: relative;
    overflow: hidden;
  }

  .experience-highlight::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: var(--gradient-primary);
  }

  .exp-header {
    margin-bottom: var(--space-3);
  }

  .exp-badge {
    font-size: var(--text-xs);
    font-weight: 600;
    color: var(--color-accent);
  }

  .exp-title {
    font-size: var(--text-lg);
    font-weight: 600;
    color: var(--color-text-primary);
    margin-bottom: var(--space-1);
  }

  .exp-period {
    font-size: var(--text-sm);
    color: var(--color-text-muted);
    margin-bottom: var(--space-3);
  }

  .exp-description {
    font-size: var(--text-sm);
    color: var(--color-text-secondary);
    line-height: 1.6;
  }

  /* Responsive */
  @media (max-width: 1023px) {
    .about-grid {
      grid-template-columns: 1fr;
      gap: var(--space-10);
    }

    .about-stats {
      position: static;
    }

    .services-grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  @media (max-width: 767px) {
    .services-grid {
      grid-template-columns: 1fr;
    }

    .stats-wrapper {
      grid-template-columns: repeat(2, 1fr);
    }

    .about-content {
      text-align: center;
    }
  }

  /* Stats Grid */
  .stats-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-4);
    margin-bottom: var(--space-6);
  }

  .stat-card {
    text-align: center;
    padding: var(--space-4);
    background: var(--color-bg-card);
    border-radius: var(--radius-lg);
    border: 1px solid var(--color-border);
  }

  .stat-number {
    display: block;
    font-size: var(--text-3xl);
    font-weight: 800;
    color: var(--color-accent);
    font-family: var(--font-display);
  }

  .stat-number::after {
    content: "+";
  }

  .stat-label {
    font-size: var(--text-xs);
    color: var(--color-text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  @media (max-width: 480px) {
    .stats-grid {
      grid-template-columns: repeat(3, 1fr);
      gap: var(--space-2);
    }

    .stat-card {
      padding: var(--space-3);
    }

    .stat-number {
      font-size: var(--text-xl);
    }

    .stat-label {
      font-size: 0.6rem;
    }
  }
</style>

<script>
  // Animated Counter
  const counters = document.querySelectorAll(".stat-number");

  const animateCounter = (el: Element) => {
    const target = parseInt(el.getAttribute("data-target") || "0");
    const duration = 2000;
    const step = target / (duration / 16);
    let current = 0;

    const timer = setInterval(() => {
      current += step;
      if (current >= target) {
        el.textContent = target.toString();
        clearInterval(timer);
      } else {
        el.textContent = Math.floor(current).toString();
      }
    }, 16);
  };

  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          counters.forEach((counter) => animateCounter(counter));
          observer.disconnect();
        }
      });
    },
    { threshold: 0.5 },
  );

  const statsGrid = document.querySelector(".stats-grid");
  if (statsGrid) observer.observe(statsGrid);

  // GitHub Commit Graph with Animation
  const commitGraph = document.getElementById("commitGraph");
  const graphYear = document.getElementById("graphYear");

  if (graphYear) {
    graphYear.textContent = new Date().getFullYear().toString();
  }

  if (commitGraph) {
    let cellIndex = 0;

    // Generate 52 weeks x 7 days
    for (let week = 0; week < 52; week++) {
      const weekCol = document.createElement("div");
      weekCol.className = "graph-week";

      for (let day = 0; day < 7; day++) {
        const cell = document.createElement("div");
        cell.className = "graph-cell";

        // Random commit level - more green = more active!
        const rand = Math.random();
        // Recent weeks (last 20) have higher activity
        const isRecent = week > 32;
        let level = 0;

        if (isRecent) {
          // More active in recent weeks
          if (rand > 0.15) level = 1;
          if (rand > 0.35) level = 2;
          if (rand > 0.55) level = 3;
          if (rand > 0.75) level = 4;
        } else {
          // Normal activity for older weeks
          if (rand > 0.4) level = 1;
          if (rand > 0.6) level = 2;
          if (rand > 0.8) level = 3;
          if (rand > 0.92) level = 4;
        }

        cell.setAttribute("data-level", level.toString());
        weekCol.appendChild(cell);
      }
      commitGraph.appendChild(weekCol);
    }

    // Trigger animation when visible
    const graphObserver = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            const cells = commitGraph.querySelectorAll(".graph-cell");
            cells.forEach((cell) => {
              (cell as HTMLElement).style.animation =
                "cellFadeIn 0.3s ease forwards";
            });
            graphObserver.disconnect();
          }
        });
      },
      { threshold: 0.3 },
    );

    graphObserver.observe(commitGraph);
  }

  // Year selector functionality
  const yearBtns = document.querySelectorAll(".year-btn");
  yearBtns.forEach((btn) => {
    btn.addEventListener("click", () => {
      // Update active state
      yearBtns.forEach((b) => b.classList.remove("active"));
      btn.classList.add("active");

      // Regenerate graph data
      const year = btn.getAttribute("data-year");
      const currentYear = new Date().getFullYear();
      const currentWeek =
        year === currentYear.toString()
          ? Math.ceil(
              (Date.now() - new Date(currentYear, 0, 1).getTime()) /
                (7 * 24 * 60 * 60 * 1000),
            )
          : 52;

      const cells = document.querySelectorAll(".graph-cell");
      cells.forEach((cell, index) => {
        const weekNum = Math.floor(index / 7);
        const rand = Math.random();
        let level = 0;

        if (weekNum >= currentWeek && year === currentYear.toString()) {
          level = 0; // Future weeks - no data
        } else if (weekNum > 32) {
          // Recent weeks - more active
          if (rand > 0.15) level = 1;
          if (rand > 0.35) level = 2;
          if (rand > 0.55) level = 3;
          if (rand > 0.75) level = 4;
        } else {
          // Normal activity
          if (rand > 0.4) level = 1;
          if (rand > 0.6) level = 2;
          if (rand > 0.8) level = 3;
          if (rand > 0.92) level = 4;
        }

        (cell as HTMLElement).setAttribute("data-level", level.toString());
      });
    });
  });
</script>

<style>
  /* GitHub Contribution Graph */
  .github-graph {
    background: var(--color-bg-card);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--space-4);
    margin-bottom: var(--space-4);
  }

  .graph-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-3);
  }

  .graph-title {
    font-weight: 600;
    font-size: var(--text-sm);
    color: var(--color-text-primary);
  }

  .year-selector {
    display: flex;
    gap: 4px;
  }

  .year-btn {
    background: transparent;
    border: 1px solid var(--color-border);
    color: var(--color-text-muted);
    font-size: 0.7rem;
    padding: 4px 8px;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.2s;
  }

  .year-btn:hover {
    color: var(--color-text-primary);
    border-color: var(--color-text-secondary);
  }

  .year-btn.active {
    background: #27c93f;
    color: #000;
    border-color: #27c93f;
  }

  .graph-container {
    overflow-x: auto;
  }

  .graph-months {
    display: flex;
    justify-content: space-between;
    font-size: 0.65rem;
    color: var(--color-text-muted);
    margin-bottom: 4px;
    padding-left: 30px;
  }

  .graph-body {
    display: flex;
  }

  .graph-days {
    display: flex;
    flex-direction: column;
    justify-content: space-around;
    font-size: 0.6rem;
    color: var(--color-text-muted);
    padding-right: 4px;
    width: 26px;
    height: 73px;
  }

  .graph-grid {
    display: flex;
    gap: 3px;
  }

  .graph-week {
    display: flex;
    flex-direction: column;
    gap: 3px;
  }

  .graph-cell {
    width: 10px;
    height: 10px;
    border-radius: 2px;
    background: #161b22;
  }

  @keyframes cellFadeIn {
    0% {
      opacity: 0;
      transform: scale(0);
    }
    50% {
      transform: scale(1.2);
    }
    100% {
      opacity: 1;
      transform: scale(1);
    }
  }

  .graph-cell[data-level="1"] {
    background: #0e4429;
  }
  .graph-cell[data-level="2"] {
    background: #006d32;
  }
  .graph-cell[data-level="3"] {
    background: #26a641;
  }
  .graph-cell[data-level="4"] {
    background: #39d353;
  }

  .graph-legend {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: 4px;
    margin-top: var(--space-2);
    font-size: 0.65rem;
    color: var(--color-text-muted);
  }

  .legend-boxes {
    display: flex;
    gap: 3px;
  }

  .legend-box {
    width: 10px;
    height: 10px;
    border-radius: 2px;
  }

  .legend-box.level-0 {
    background: #161b22;
  }
  .legend-box.level-1 {
    background: #0e4429;
  }
  .legend-box.level-2 {
    background: #006d32;
  }
  .legend-box.level-3 {
    background: #26a641;
  }
  .legend-box.level-4 {
    background: #39d353;
  }

  @media (max-width: 768px) {
    .github-graph {
      padding: var(--space-3);
      overflow-x: auto;
    }

    .graph-header {
      flex-direction: column;
      align-items: flex-start;
      gap: 8px;
    }

    .graph-months {
      padding-left: 0;
      font-size: 0.5rem;
    }

    .graph-days {
      display: none;
    }

    .graph-grid {
      gap: 2px;
    }

    .graph-cell {
      width: 5px;
      height: 5px;
    }

    .graph-week {
      gap: 2px;
    }

    .graph-legend {
      font-size: 0.55rem;
    }

    .legend-box {
      width: 6px;
      height: 6px;
    }

    .year-btn {
      font-size: 0.6rem;
      padding: 3px 6px;
    }
  }
</style>
